<Window x:Class="AssignmentPRN212.Views.CustomerOrderHistoryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Lá»‹ch sá»­ Ä‘Æ¡n hÃ ng cá»§a tÃ´i" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#F0F0F0">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="White" CornerRadius="5" Padding="15" Margin="0,0,0,10">
            <TextBlock Text="ðŸ“‹ Lá»‹ch sá»­ Ä‘Æ¡n hÃ ng cá»§a tÃ´i" FontSize="20" FontWeight="Bold"/>
        </Border>

        <!-- Orders List -->
        <DataGrid x:Name="OrdersDataGrid" AutoGenerateColumns="False" SelectionMode="Single"
                  CanUserAddRows="False" CanUserDeleteRows="False"
                  Grid.Row="1" HeadersVisibility="Column"
                  RowBackground="#FFFFFF" AlternatingRowBackground="#F7F7F7"
                  GridLinesVisibility="None"
                  SelectionChanged="OrdersDataGrid_SelectionChanged"
                  FontSize="14" FontWeight="Normal">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="NgÃ y Ä‘áº·t" Binding="{Binding OrderDate, StringFormat=dd/MM/yyyy}" Width="100"/>
                <DataGridTextColumn Header="Nháº­n xe" Binding="{Binding PickupTime, StringFormat=dd/MM/yyyy HH:mm}" Width="130"/>
                <DataGridTextColumn Header="Tráº£ xe" Binding="{Binding ExpectedReturnTime, StringFormat=dd/MM/yyyy HH:mm}" Width="130"/>
                <DataGridTextColumn Header="Tá»•ng tiá»n" Binding="{Binding Total, StringFormat=N0}" Width="120"/>
                <DataGridTextColumn Header="Tráº¡ng thÃ¡i" Binding="{Binding Status}" Width="120"/>
                <DataGridTemplateColumn Header="Thao tÃ¡c" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button Content="Chi tiáº¿t" Width="80" Height="30" Margin="0,0,5,0"
                                        Background="#2196F3" Foreground="White" FontSize="12"
                                        BorderThickness="0" Cursor="Hand"
                                        Click="ViewDetailButton_Click" Tag="{Binding}"/>
                                <Button Content="Thanh toÃ¡n" Width="90" Height="30" Margin="0,0,5,0"
                                        Background="#4CAF50" Foreground="White" FontSize="12"
                                        BorderThickness="0" Cursor="Hand"
                                        Click="PayButton_Click" Tag="{Binding}">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <!-- Máº·c Ä‘á»‹nh áº©n nÃºt, chá»‰ hiá»ƒn thá»‹ khi status lÃ  PaymentPending -->
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <!-- Hiá»ƒn thá»‹ nÃºt khi status lÃ  PaymentPending (6) -->
                                                <DataTrigger Binding="{Binding Status}" Value="PaymentPending">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Status}" Value="6">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>

